<!DOCTYPE html>
<html lang="en">

  <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- Begin Jekyll SEO tag v2.5.0 -->
<title>Python - Flask 에서 Chart.js Legend 구현하기 | Hong Wonjun Blog</title>
<meta name="generator" content="Jekyll v3.8.6" />
<meta property="og:title" content="Python - Flask 에서 Chart.js Legend 구현하기" />
<meta name="author" content="Hong Wonjun" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="웹에 그래프를 그리는 Javascript Library 중에 Chart.js 가 있다. 꽤 심플해서 사용하는데 legend 이 없어서 검색을 해보니 아래와 같은 방식으로 legend 을 구현한다. Chart Options 에 아래 내용을 추가한다." />
<meta property="og:description" content="웹에 그래프를 그리는 Javascript Library 중에 Chart.js 가 있다. 꽤 심플해서 사용하는데 legend 이 없어서 검색을 해보니 아래와 같은 방식으로 legend 을 구현한다. Chart Options 에 아래 내용을 추가한다." />
<link rel="canonical" href="http://localhost:4000/2016-02-09/flask-chartjs-legend" />
<meta property="og:url" content="http://localhost:4000/2016-02-09/flask-chartjs-legend" />
<meta property="og:site_name" content="Hong Wonjun Blog" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2016-02-09T00:00:00+09:00" />
<script type="application/ld+json">
{"url":"http://localhost:4000/2016-02-09/flask-chartjs-legend","headline":"Python - Flask 에서 Chart.js Legend 구현하기","dateModified":"2016-02-09T00:00:00+09:00","datePublished":"2016-02-09T00:00:00+09:00","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/2016-02-09/flask-chartjs-legend"},"author":{"@type":"Person","name":"Hong Wonjun"},"description":"웹에 그래프를 그리는 Javascript Library 중에 Chart.js 가 있다. 꽤 심플해서 사용하는데 legend 이 없어서 검색을 해보니 아래와 같은 방식으로 legend 을 구현한다. Chart Options 에 아래 내용을 추가한다.","@type":"BlogPosting","@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->


  <!-- CSS -->
  <link rel="stylesheet" href="/assets/main.css">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Libre+Baskerville:400,400i,700">

  <!-- Favicon -->
  <link rel="icon" type="image/png" sizes="32x32" href="/assets/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/assets/favicon-16x16.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/assets/apple-touch-icon.png">

  <!-- RSS -->
  <link type="application/atom+xml" rel="alternate" href="http://localhost:4000/feed.xml" title="Hong Wonjun Blog" />

  <!-- Google Analytics-->
  
</head>


  <body>

    <nav class="nav">
  <div class="nav-container">
    <a href="/">
      <h2 class="nav-title">Hong Wonjun Blog</h2>
    </a>
    <ul>
      <li><a href="/about">About</a></li>
      <li><a href="/">Posts</a></li>
    </ul>
  </div>
</nav>


    <main>
      <div class="post">
  <div class="post-info">
    <span>Written by</span>
    
        Hong Wonjun
    

    
      <br>
      <span>on&nbsp;</span><time datetime="2016-02-09 00:00:00 +0900">February 09, 2016</time>
    
  </div>

  <h1 class="post-title">Python - Flask 에서 Chart.js Legend 구현하기</h1>
  <div class="post-line"></div>

  <p>웹에 그래프를 그리는 Javascript Library 중에 <a href="http://www.chartjs.org">Chart.js</a> 가 있다.
꽤 심플해서 사용하는데 legend 이 없어서 검색을 해보니 아래와 같은 방식으로 legend 을 구현한다.
Chart Options 에 아래 내용을 추가한다.</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="c1">//String - A legend template</span>
<span class="nx">legendTemplate</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">&amp;lt;ul class=</span><span class="dl">"</span><span class="err">\</span><span class="dl">"</span><span class="s2">&amp;lt;%=name.toLowerCase()%</span><span class="dl">"</span><span class="o">&amp;</span><span class="nx">gt</span><span class="p">;</span><span class="o">-</span><span class="nx">legend</span><span class="err">\</span><span class="dl">"</span><span class="s2">&amp;gt;&amp;lt;li&amp;gt;&amp;lt;span style=</span><span class="dl">"</span><span class="err">\</span><span class="dl">"</span><span class="s2">background-color:&amp;lt;%=datasets[i].strokeColor%</span><span class="dl">"</span><span class="o">&amp;</span><span class="nx">gt</span><span class="p">;</span><span class="err">\</span><span class="dl">"</span><span class="s2">&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/li&amp;gt;&amp;lt;/ul&amp;gt;</span><span class="dl">"</span></code></pre></figure>

<p>그래프 생성 후 아래 코드를 호출한다.</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">myLineChart</span><span class="p">.</span><span class="nx">generateLegend</span><span class="p">();</span>
<span class="c1">// =&amp;gt; returns HTML string of a legend for this chart</span></code></pre></figure>

<p>위와 같이 호출하는 경우 HTML 코드가 반환되기 때문에 아래와 같이 정해진 id 에 반환된 HTML 코드를 넣으면 된다.</p>

<figure class="highlight"><pre><code class="language-markup" data-lang="markup">&amp;lt;div id="legend"&amp;gt;&amp;lt;/div&amp;gt;</code></pre></figure>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="dl">'</span><span class="s1">legend</span><span class="dl">'</span><span class="p">).</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="nx">myLineChart</span><span class="p">.</span><span class="nx">generateLegend</span><span class="p">();</span></code></pre></figure>

<p>이 때 css 를 아래와 같이 입력해두면 작은 사각형으로 그려낼 수 있다.</p>

<figure class="highlight"><pre><code class="language-css" data-lang="css"><span class="nf">#legend</span> <span class="nt">li</span> <span class="nt">span</span> <span class="p">{</span>
  <span class="nl">display</span><span class="p">:</span> <span class="n">inline-block</span><span class="p">;</span>
  <span class="nl">width</span><span class="p">:</span><span class="m">11px</span><span class="p">;</span>
  <span class="nl">height</span><span class="p">:</span><span class="m">11px</span><span class="p">;</span>
  <span class="nl">margin-right</span><span class="p">:</span><span class="m">7px</span><span class="p">;</span>
<span class="p">}</span></code></pre></figure>

<p>하지만 이를 Flask 에서 실행하는 경우 아래와 같은 에러가 발생한다.</p>

<figure class="highlight"><pre><code class="language-clike" data-lang="clike">"TemplateSyntaxError: tag name expected"</code></pre></figure>

<p>jinja2 와의 문법 충돌 때문인데, {% 와 %} 를 {\% 와 \%} 로 수정해야 한다. 즉, 위 코드를 아래와 같이 수정하면 된다.</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">legendTemplate</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">&amp;lt;ul class=</span><span class="dl">"</span><span class="err">\</span><span class="dl">"</span><span class="s2">&amp;lt;%=name.toLowerCase()%</span><span class="dl">"</span><span class="o">&amp;</span><span class="nx">gt</span><span class="p">;</span><span class="o">-</span><span class="nx">legend</span><span class="err">\</span><span class="dl">"</span><span class="s2">&amp;gt;&amp;lt;li&amp;gt;&amp;lt;span style=</span><span class="dl">"</span><span class="err">\</span><span class="dl">"</span><span class="s2">background-color:&amp;lt;%=datasets[i].lineColor%</span><span class="dl">"</span><span class="o">&amp;</span><span class="nx">gt</span><span class="p">;</span><span class="err">\</span><span class="dl">"</span><span class="s2">&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/li&amp;gt;&amp;lt;/ul&amp;gt;</span><span class="dl">"</span><span class="p">}</span></code></pre></figure>

<p>Reference</p>
<ul>
  <li>
    <table>
      <tbody>
        <tr>
          <td>[Chart.js</td>
          <td>Documentation](http://www.chartjs.org/docs/)</td>
        </tr>
      </tbody>
    </table>
  </li>
  <li><a href="http://jsfiddle.net/vrwjfg9z/">Chart.js Legend Customization</a></li>
  <li><a href="http://stackoverflow.com/questions/26509287/templatesyntaxerror-tag-name-expected">jinja2 - TemplateSyntaxError: tag name expected</a></li>
</ul>



</div>

<div class="pagination">
  
    <a href="/2016-02-09/flask-template-comma" class="left arrow">&#8592;</a>
  
  
    <a href="/2016-02-03/%EB%B9%85%EB%8D%B0%EC%9D%B4%ED%84%B0%EB%A7%8C-%EB%AF%BF%EC%A7%80%EB%A7%88" class="right arrow">&#8594;</a>
  

  <a href="#" class="top">Top</a>
</div>

    </main>

    <footer>
  <span>
    &copy; <time datetime="2019-10-03 23:41:45 +0900">2019</time> Hong Wonjun. Made with Jekyll using the <a href="https://github.com/chesterhow/tale/">Tale</a> theme.
  </span>
</footer>

  </body>
</html>
